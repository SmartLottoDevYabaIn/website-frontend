<!-- Page Wrapper -->
<div class="page-wrapper">
  <div class="content container-fluid">
    <!-- Page Header -->
    <div class="page-header">
      <div class="row align-items-center">
        <div class="col">
          <h3 class="page-title">Customers</h3>
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="'/index'">Dashboard</a></li>
            <li class="breadcrumb-item active">Customers</li>
          </ul>
        </div>
        <div class="col-auto">
          <a [routerLink]="'/customers/add-customer'" class="btn btn-primary me-2"
            style="color: #035858 !important; background-color: #ffff !important;">
            <i class="fas fa-plus"></i>
          </a>
          <a (click)="refreshList()" class="btn btn-primary me-2"
            style="color: #035858 !important; background-color: #ffff !important;">
            <i class="fas fa-refresh"></i>
          </a>
        </div>
      </div>
    </div>
    <!-- /Page Header -->

    <!-- Search Filter -->
    <div id="filter_inputs" class="card filter-card">
      <div class="card-body pb-0">
        <div class="row">
          <div class="col-sm-6 col-md-3">
            <div class="form-group">
              <label>Name</label>
              <input type="text" class="form-control" />
            </div>
          </div>
          <div class="col-sm-6 col-md-3">
            <div class="form-group">
              <label>Email</label>
              <input type="text" class="form-control" />
            </div>
          </div>
          <div class="col-sm-6 col-md-3">
            <div class="form-group">
              <label>Phone</label>
              <input type="text" class="form-control" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /Search Filter -->

    <div class="row" *ngIf="wating">
      <div class="col-sm-12">
        <app-progress-indeterminate></app-progress-indeterminate>
      </div>
    </div>

    <div class="row" *ngIf="!wating">
      <div class="col-sm-12">
        <div class="card card-table">
          <div class="card-body">
            <div class="table-responsive">
              <table datatable class="table table-stripped table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Customer</th>
                    <th>Email</th>
                    <th>Country</th>
                    <th>City</th>
                    <th>Registered On</th>
                    <th>Status</th>
                    <th class="text-end">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let customer of customers; let i = index" (click)="splitTime(customer.registered_on);userData = customer"
                    data-bs-toggle="modal" data-bs-target="#details">
                    <td>
                      <h2 class="table-avatar">
                        <a class="avatar avatar-sm me-2"><img class="avatar-img rounded-circle"
                            src="assets/img/smartestlotto-user-profile.png" alt="User Image" /></a>
                        <a>{{ customer.name
                          }}<span>{{ customer.phone }}</span></a>
                      </h2>
                    </td>
                    <td>{{ customer.email }}</td>
                    <td>{{ customer.country }}</td>
                    <td>{{ customer.city }}</td>
                    <td>{{ customer.registered_on | date: "dd MMM yyyy" }}</td>
                    <td>
                      <span [ngClass]="
                          customer.status === 'Active'
                            ? 'badge badge-pill bg-success-light'
                            : 'badge badge-pill bg-danger-light'
                        ">{{ customer.status }}</span>
                    </td>
                    <td class="text-end">
                      <a (click)="tempId = customer.name" data-bs-toggle="modal" data-bs-target="#changeStatus"
                        [ngClass]="
                          customer.status === 'Active'
                            ? 'bg-danger-light btn btn-sm btn-white'
                            : 'bg-success-light btn btn-sm btn-white'
                        " style="margin-right: 10px;">
                        <i class="fa fa-power-off"></i></a>
                      <a class="btn btn-sm btn-white text-success me-2"><i class="far fa-edit me-1"></i></a>
                      <a (click)="tempId = customer.name" data-bs-toggle="modal" data-bs-target="#delete_customer"
                        class="btn btn-sm btn-white text-danger me-2"><i class="far fa-trash-alt me-1"></i></a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal custom-modal fade" id="delete_customer" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="modal-icon text-center mb-3">
          <i class="fas fa-trash-alt text-danger"></i>
        </div>
        <div class="modal-text text-center">
          <h2>Delete User</h2>
          <p>Are you sure want to delete <b>{{tempId}}</b>? </p>
        </div>
      </div>
      <div class="modal-footer text-center">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-danger" (click)="deleteCustomer()" data-bs-dismiss="modal">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
<!-- /Delete Tax Modal -->

<!-- Delete Tax Modal -->
<div class="modal custom-modal fade" id="changeStatus" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="modal-icon text-center mb-3">
          <i class="fa fa-power-off text-secondary"></i>
        </div>
        <div class="modal-text text-center">
          <h2>Change status ?</h2>
          <p>Are you sure want to change status of <b>{{tempId}}</b>? </p>
        </div>
      </div>
      <div class="modal-footer text-center">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary" (click)="deleteCustomer()" data-bs-dismiss="modal">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal custom-modal fade" id="details" role="dialog">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <div class="card">
          <!-- <div class="card-header">
            <h5 class="card-title">{{'profile' | translate }}</h5>
        </div> -->
          <div class="card-body" style="padding-bottom: 0 !important;">
            <!-- Form -->
            <form>
              <div class="row form-group" style="margin-bottom: 0 !important;">
                <div class="profile-cover">
                  <div class="profile-cover-wrap">
                    <img class="profile-cover-img" src="../../../../../assets/img/lotto_bg02.jpeg" alt="Profile Cover">

                    <!-- Custom File Cover -->
                    <!-- <div class="cover-content" style="margin-bottom: 0 !important;">
                      <div class="custom-file-btn">
                        <input type="file" class="custom-file-btn-input" id="cover_upload">
                        <label class="custom-file-btn-label btn btn-sm btn-white" for="cover_upload">
                          <i class="fas fa-camera"></i>
                          <span class="d-none d-sm-inline-block ms-1">{{'edit' | translate }}</span>
                        </label>
                      </div>
                    </div> -->
                    <!-- /Custom File Cover -->
                  </div>
                </div>

                <div class="text-center mb-5">
                  <label class="avatar avatar-xxl profile-cover-avatar" for="avatar_upload">
                    <img class="avatar-img" src="assets/img/smartestlotto-user-profile.png" alt="Profile Image">
                    <!-- <input type="file" id="avatar_upload"> -->
                    <!-- <span class="avatar-edit">
                      <i class="fas fa-edit avatar-uploader-icon shadow-soft"></i>
                    </span> -->
                  </label>
                  <h2>{{userData.firstName}} {{userData.lastName}} <i class="fas fa-certificate text-primary small"
                      data-bs-toggle="tooltip" data-placement="top" title="" data-original-title="Verified"></i>
                  </h2>
                  <!-- <ul class="list-inline">
                    <li class="list-inline-item">
                      <i class="fa fa-flag"></i> {{userData.country}}
                    </li>
                    <li class="list-inline-item">
                      <i class="fas fa-calendar-alt"></i> <span> {{creationDate}} {{'at' | translate }}
                        {{creationTime}}</span>
                    </li>
                  </ul> -->
                </div>
              </div>
            </form>
          </div>
          <div class="card flex-fill bg-white">
            <div class="card-header">
              <ul role="tablist" class="nav nav-tabs card-header-tabs float-right">
                <li class="nav-item">
                  <a href="#tab-1" data-bs-toggle="tab" class="nav-link active">Infos</a>
                </li>
                <li class="nav-item">
                  <a href="#tab-2" data-bs-toggle="tab" class="nav-link">Contact</a>
                </li>
                <li class="nav-item">
                  <a href="#tab-3" data-bs-toggle="tab" class="nav-link">Location</a>
                </li>
              </ul>
            </div>
            <div class="card-body">
              <div class="tab-content pt-0">
                <div role="tabpanel" id="tab-1" class="tab-pane fade show active">
                  <div class="card-body">
                    <form>
                      <div class="row form-group">
                        <label for="name" class="col-sm-3 col-form-label input-label"><b>
                            {{'user.firstName' | translate }}
                            :</b></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="name" placeholder=""
                            value="{{userData.firstName}}" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="name" class="col-sm-3 col-form-label input-label"><b>
                            {{'user.lastName' | translate }}
                            :</b></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="name" placeholder="" value="{{userData.lastName}}"
                            disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="name" class="col-sm-3 col-form-label input-label"><b>
                            {{'user.creationDate' | translate }}
                            :</b></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="name" placeholder=""
                            value=" {{creationDate}} {{'at' | translate }} {{creationTime}}" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="name" class="col-sm-3 col-form-label input-label"><b> Bio
                            :</b></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="name" placeholder="" value="{{userData.bio}}"
                            disabled>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <div role="tabpanel" id="tab-2" class="tab-pane fade">
                  <div class="card-body">
                    <form>
                      <div class="row form-group">
                        <label for="phone" class="col-sm-3 col-form-label input-label"><b>
                            {{'user.phone' | translate }} 1:</b>
                          <!-- <span class="text-muted">(Optional)</span> -->
                        </label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="phone" placeholder="+x(xxx)xxx-xx-xx"
                            value="+000 000-000-000" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="phone" class="col-sm-3 col-form-label input-label"><b>
                            {{'user.phone' | translate }} 2:</b>
                          <!-- <span class="text-muted">(Optional)</span> -->
                        </label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="phone" placeholder="+x(xxx)xxx-xx-xx"
                            value="+000 000-000-000" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="email" class="col-sm-3 col-form-label input-label"><b>
                            {{'user.email' | translate }}
                            :</b></label>
                        <div class="col-sm-9">
                          <input type="email" class="form-control" id="email" placeholder="Email"
                            value="{{userData.email}}" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="zipcode" class="col-sm-3 col-form-label input-label"><b>{{'user.zip' | translate
                            }}</b></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="zipcode" placeholder="Your zip code" value="25301"
                            disabled>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <div role="tabpanel" id="tab-3" class="tab-pane fade">
                  <div class="card-body">
                    <form>
                      <div class="row form-group">
                        <label for="phone" class="col-sm-3 col-form-label input-label"><b> {{'user.country' | translate
                            }} :</b>
                          <!-- <span class="text-muted">(Optional)</span> -->
                        </label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="country" placeholder=""
                            value="{{userData.country}}" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="location" class="col-sm-3 col-form-label input-label"><b> {{'user.location' |
                            translate }}
                            :</b></label>
                        <div class="col-sm-9">
                          <div class="mb-3">
                            <input type="text" class="form-control" id="location"
                              placeholder="{{'user.location' | translate }}" value="{{userData.city}}" disabled>
                          </div>
                          <!-- <div class="mb-3">
                                            <input type="text" class="form-control" placeholder="City" value="Charleston" disabled>
                                        </div>
                                        <input type="text" class="form-control" placeholder="State" value="West Virginia" disabled> -->
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="addressline1" class="col-sm-3 col-form-label input-label"><b> {{'user.addressLine' |
                            translate }} 1</b></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="addressline1" placeholder=""
                            value="2681  Columbia Mine Road" disabled>
                        </div>
                      </div>
                      <div class="row form-group">
                        <label for="addressline2" class="col-sm-3 col-form-label input-label"><b> {{'user.addressLine' |
                            translate }} 2</b> <span class="text-muted"> (Optional)</span></label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" id="addressline2" placeholder="" disabled>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <div class="text-end">
                <button type="submit" class="btn btn-primary" disabled>{{'save' | translate }}</button>
              </div>
            </div>
          </div>
        </div>
        <section class="comp-section comp-cards">
          <div class="row">
            <div class="col-12 col-md-12 col-lg-12 d-flex">
            </div>
          </div>
        </section>
      </div>
      <div class="modal-footer text-center">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary" (click)="deleteCustomer()" data-bs-dismiss="modal">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>